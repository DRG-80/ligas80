<app-header></app-header>

<div class="container mt-5 mb-5" style="min-height: 60vh;">


  <div *ngIf="!pertenencia" class="text-center mt-5 d-flex flex-column align-items-center justify-content-center" style="height: 50vh;">
    <div class="spinner-border text-danger" style="width: 4rem; height: 4rem;" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <h4 class="mt-3 text-muted fw-bold">Cargando competición...</h4>
  </div>


  <div *ngIf="pertenencia" class="animate__animated animate__fadeIn">


    <div *ngIf="!iniciada" class="pretemporada-container">


      <div class="text-center mb-5">
        <h6 class="text-uppercase text-muted ls-2">Panel de Administración</h6>
        <h1 class="display-4 fw-bold text-uppercase titulo-rojo">Pretemporada</h1>
        <p class="lead text-muted">Antes de comenzar, debes realizar las siguientes acciones</p>
        <div class="divider-negro mx-auto mt-3"></div>
      </div>

      <div class="row g-4 justify-content-center">

        <div class="col-md-5 col-lg-4">
          <div class="card h-100 shadow-sm border-0 card-setup">
            <div class="card-body text-center p-4">
              <div class="icon-circle mb-3 mx-auto">
                <i class="bi bi-calendar-week-fill"></i>
              </div>
              <h4 class="fw-bold">1. Calendario</h4>
              <p class="text-muted small">Genera los enfrentamientos para todas las jornadas de la liga.</p>


              <div class="mb-4">
                <span class="badge rounded-pill" [ngClass]="enfrentamientos ? 'bg-success' : 'bg-warning text-dark'">
                  <i class="bi" [ngClass]="enfrentamientos ? 'bi-check-circle-fill' : 'bi-clock-fill'"></i>
                  {{ enfrentamientos ? 'Completado' : 'Pendiente' }}
                </span>
              </div>


              <button class="btn btn-setup w-100"
                      [disabled]="enfrentamientos"
                      (click)="generarEnfrentamientos()">
                {{ enfrentamientos ? 'Enfrentamientos Listos' : 'Generar Encuentros' }}
              </button>
            </div>
          </div>
        </div>


        <div class="col-md-5 col-lg-4">
          <div class="card h-100 shadow-sm border-0 card-setup">
            <div class="card-body text-center p-4">
              <div class="icon-circle mb-3 mx-auto">
                <i class="bi bi-robot"></i>
              </div>
              <h4 class="fw-bold">2. Equipos Rivales</h4>
              <p class="text-muted small">Simula el mercado de fichajes de los demás equipos (Totalmente aleatorio).</p>


              <div class="mb-4">
                <span class="badge rounded-pill" [ngClass]="fichajesEquipos ? 'bg-success' : 'bg-warning text-dark'">
                  <i class="bi" [ngClass]="fichajesEquipos ? 'bi-check-circle-fill' : 'bi-clock-fill'"></i>
                  {{ fichajesEquipos ? 'Completado' : 'Pendiente' }}
                </span>
              </div>


              <button class="btn btn-setup w-100"
                      [disabled]="fichajesEquipos"
                      (click)="simularFichajes()">
                {{ fichajesEquipos ? 'Mercado Cerrado' : 'Simular Fichajes' }}
              </button>
            </div>
          </div>
        </div>

      </div>


      <div class="text-center mt-5 mb-5">
        <button class="btn btn-iniciar-liga btn-lg px-5 py-3 shadow"
                [disabled]="!enfrentamientos || !fichajesEquipos"
                (click)="iniciarLiga()">
          <i class="bi bi-play-circle-fill me-2"></i> COMENZAR LIGA
        </button>


        <div *ngIf="!enfrentamientos || !fichajesEquipos" class="mt-3 animate__animated animate__fadeIn">
          <p class="text-danger fw-bold small">
            <i class="bi bi-exclamation-triangle-fill me-1"></i>
            Completa los pasos anteriores para habilitar el inicio.
          </p>
        </div>
      </div>

    </div>


    <div *ngIf="iniciada">


    </div>

  </div>

</div>

<app-footer></app-footer>
