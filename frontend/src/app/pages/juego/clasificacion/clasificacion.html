<app-header></app-header>

<div class="container mt-5 mb-5 clasificacion-wrapper">


  <div *ngIf="!pertenencia" class="text-center mt-5 d-flex flex-column align-items-center justify-content-center loading-container">
    <div class="spinner-border text-danger custom-spinner" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <h4 class="mt-3 text-muted fw-bold">Cargando clasificación...</h4>
  </div>


  <div *ngIf="pertenencia" class="animate__animated animate__fadeIn">


    <div *ngIf="!iniciada" class="text-center mt-5">
      <i class="bi bi-exclamation-triangle-fill text-warning mb-3 icon-large"></i>
      <h2 class="fw-bold text-dark">La liga aún no ha comenzado</h2>
      <p class="text-muted fs-5">Inicia la competición desde el panel de administración para poder generar la clasificación.</p>
      <button [routerLink]="['/jugar', idLiga]" class="btn btn-dark btn-lg mt-3 px-5 py-3 fw-bold shadow">
        Ir a Administración
      </button>
    </div>


    <div *ngIf="iniciada">


      <div class="text-center mb-5">
        <h6 class="text-uppercase text-muted ls-2">Estadísticas</h6>
        <h1 *ngIf="jornada<=38" class="display-3 fw-bold text-uppercase titulo-rojo">Clasificación</h1>
        <h1 *ngIf="jornada>38" class="display-3 fw-bold text-uppercase titulo-rojo">FINAL DE LIGA</h1>

        <p *ngIf="jornada<=38" class="lead text-muted fw-bold">Jornada {{ jornada }}</p>
        <p *ngIf="jornada>38" class="lead text-muted fw-bold">Jornada {{ jornada-1 }}</p>

        <div class="divider-negro mx-auto mt-3"></div>
      </div>


      <div class="row justify-content-center mb-4">
        <div class="col-md-4 col-sm-6">
          <button [routerLink]="['/ligasJuego', idLiga]" class="btn btn-dark w-100 py-3 fw-bold shadow-sm action-btn">
            <i class="bi bi-controller text-danger me-2"></i> Volver al Panel de Juego
          </button>
        </div>
      </div>


      <div class="card shadow border-0 overflow-hidden animate__animated animate__fadeInUp">
        <div class="table-responsive">
          <table class="table table-hover table-striped m-0 align-middle text-center tabla-clasificacion">



            <thead class="bg-dark text-white text-uppercase small letter-spacing-1">
            <tr>
              <th class="py-3 px-3 w-10">Posición</th>
              <th class="py-3 text-start ps-4 w-100">Equipo</th>
              <th class="py-3 px-3">PTS</th>
              <th class="py-3 px-3">PJ</th>
              <th class="py-3 px-3 d-none d-md-table-cell text-muted">V</th>
              <th class="py-3 px-3 d-none d-md-table-cell text-muted">E</th>
              <th class="py-3 px-3 d-none d-md-table-cell text-muted">D</th>
              <th class="py-3 px-3 d-none d-lg-table-cell">GF</th>
              <th class="py-3 px-3 d-none d-lg-table-cell">GC</th>
              <th class="py-3 px-3">DG</th>
            </tr>
            </thead>

            <tbody>
            <tr *ngFor="let item of tabla; let i = index">
              <ng-container *ngIf="item.posicion[0] as data">


                <td class="fw-bold px-3">
                    <span class="badge rounded-pill shadow-sm badge-posicion"
                          [ngClass]="{
                        'bg-primary': i < 4,
                        'bg-success': i >= 4 && i < 6,
                        'bg-info': i==6,
                        'bg-danger': i >= tabla.length - 3,
                        'bg-secondary text-white': i >= 6 && i < tabla.length - 3
                      }">
                      {{ i + 1 }}
                    </span>
                </td>


                <td class="text-start ps-4 fw-bold">
                  {{ data.equipo.nombre || data.equipo }}
                </td>


                <td class="fw-black fs-5 px-3 texto-corporativo">
                  {{ data.puntos }}
                </td>


                <td class="fw-bold text-dark px-3 bg-light">
                  {{ this.jornada-1 }}
                </td>


                <td class="d-none d-md-table-cell px-3 text-muted fw-bold">{{ data.victorias }}</td>
                <td class="d-none d-md-table-cell px-3 text-muted fw-bold">{{ data.empates }}</td>
                <td class="d-none d-md-table-cell px-3 text-muted fw-bold">{{ data.derrotas }}</td>

                <td class="d-none d-lg-table-cell text-success fw-bold px-3">{{ data.golesFavor }}</td>
                <td class="d-none d-lg-table-cell text-danger fw-bold px-3">{{ data.golesContra }}</td>


                <td class="fw-black px-3"
                    [class.text-success]="data.diferenciaGoles > 0"
                    [class.text-danger]="data.diferenciaGoles < 0"
                    [class.text-muted]="data.diferenciaGoles === 0">
                  {{ data.diferenciaGoles > 0 ? '+' : '' }}{{ data.diferenciaGoles }}
                </td>

              </ng-container>
            </tr>
            </tbody>
          </table>
        </div>
      </div>





      <div class="mt-4 mb-5 d-flex flex-wrap justify-content-center gap-4 text-small text-muted fw-bold">
        <div class="d-flex align-items-center">
          <span class="bg-primary rounded-circle shadow-sm me-2 legend-dot"></span> Champions League
        </div>
        <div class="d-flex align-items-center">
          <span class="bg-success rounded-circle shadow-sm me-2 legend-dot"></span> Europa League
        </div>
        <div class="d-flex align-items-center">
          <span class="bg-info rounded-circle shadow-sm me-2 legend-dot"></span> Conference League
        </div>
        <div class="d-flex align-items-center">
          <span class="bg-danger rounded-circle shadow-sm me-2 legend-dot"></span> Descenso
        </div>
      </div>

    </div>
  </div>
</div>


<app-footer></app-footer>
